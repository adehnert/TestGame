machine:
  post:
    - pyenv global 2.7.12 3.6.2

dependencies:
  pre:
    - sudo apt-get install texlive-latex-base texlive-latex-extra texlive-fonts-recommended
    - pip3 install pylint flake8  # use apt-get pylint3 starting in 16.04

test:
  override:
    - "cd Extras && python3 -mpylint vgametex.py && echo flake8 && python3 -mflake8 vgametex.py"
    - "cd Production && ../Extras/vgametex.py -- make"
    - "cd Greensheets && ../Extras/vgametex.py -- make"
  post:
    - mkdir $CIRCLE_ARTIFACTS/sheets $CIRCLE_ARTIFACTS/greensheets
    - cp Production/*.pdf Production/json-PRINT.json $CIRCLE_ARTIFACTS/sheets
    - cp Greensheets/*.pdf $CIRCLE_ARTIFACTS/greensheets
