machine:
  environment:
    testgame: "/home/ubuntu/TestGame"
    TEXINPUTS: "/home/ubuntu/TestGame/LaTeX:"
  post:
    - pyenv global 2.7.12 3.6.2

dependencies:
  pre:
    - sudo apt-get install texlive-latex-base texlive-latex-extra texlive-fonts-recommended python3-flake8
    - pip3 install pylint  # use apt-get pylint3 starting in 16.04

test:
  override:
    - "cd Production && make"
    - "cd Greensheets && make"
    - "cd Extras && python3 -mpylint vgametex.py && echo flake8 && python3 -mflake8 vgametex.py"
  post:
    - mkdir $CIRCLE_ARTIFACTS/sheets $CIRCLE_ARTIFACTS/greensheets
    - cp Production/*.pdf Production/json-PRINT.json $CIRCLE_ARTIFACTS/sheets
    - cp Greensheets/*.pdf $CIRCLE_ARTIFACTS/greensheets
